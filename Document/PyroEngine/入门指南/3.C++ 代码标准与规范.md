![[Mavuika_3.png]]
本篇文章旨在定义 PyroEngine 游戏引擎项目所遵循的代码标准与开发规范，旨在提高代码的一致性、可读性和可维护性。
## 适用范围
适用于所有游戏引擎核心模块、工具链及示例代码的开发。
## 命名规范
#### 文件命名
**格式**：采用 `AaBb` 的帕斯卡命名法。
**扩展名**：
- C++ 源文件以 `.cpp` 结尾。
- C++ 头文件以 `.h` 结尾。
- 用于被包含的纯文本或代码片段文件以 `.inc` 结尾。
**示例**：
```
MyClass.h
MyClass.cpp
Internal.inc
```
#### 类型命名
**格式**：采用 `AaBb` 的帕斯卡命名法。
**适用范围**：类、结构体、枚举、类型别名 (`using`/`typedef`)、模板类型参数。
**示例**：
```
class MyClass;
struct MyParam;
enum MyConst;

using NewClass = OldClass;
typedef OldClass NewClass

template<class Type>
class TMyClass;
```
#### 变量命名
**普通变量 (局部变量、函数参数)**：采用 `aaBb` 的驼峰命名法，首字母小写。
```
int num;
String tableName;
```
**类的私有数据成员**：采用 `m_aaBb` 格式，以 `m_` 为前缀。
```
class MyClass
{
private:
	int m_num;
	String m_tableName;
}
```
**类的公有数据成员与结构体成员**：采用 `AaBb` 的帕斯卡命名法 _（注：通常建议类成员保持私有，通过访问函数公开）_
```
class MyClass
{
public:
	int Value;
	String TableName;
}

stuct MyData
{
	int Value;
	String DataName;
}
```
#### 常量命名
**格式**：采用 `AA_BB` 的大写下划线命名法。
**适用范围**：全局或命名空间范围内的 `const` 和 `constexpr` 变量。
**示例**：
```
const int MAX_VALUE;
constexpr int MAX_LIMIT;
```
#### 全局单例对象
**格式**：采用 `GAaBb` 格式，以 `G` 为前缀。
**示例**：
```
Console* GConsole;
Log* GLog;
```
#### 命名空间
**格式**：采用 `AaBb` 的帕斯卡命名法。
**示例**：
```
namespace Core { ... };
```
#### 函数命名
**常规函数与类的公有成员函数**：采用 `AaBb` 的帕斯卡命名法，动词开头。
```
int Add(int left, int right);
```
**类共有成员函数**：采用 `AaBb` 的帕斯卡命名法，动词开头。
```
class MyClass
{
public:
	int Count() const;
}
```
**类的私有或保护成员函数**：采用 `_AaBb` 格式，以下划线开头。
```
class MyClass
{
private:
	int _GetValue();
}
```
#### 迭代器
- 遵循 C++ 标准库惯例。
- 类型名通常为 `iterator`、`const_iterator`。
- 获取函数为 `begin()`、`end()` 等。
```
class MyContainer 
{
public:
    iterator begin();
    iterator end();
};
```
## 代码结构
#### 文件结构
- **预编译头文件** (若使用)：`#include "pch.h"` 或类似。
- **防护宏**：使用 `#pragma once`防卫。
- **头文件包含顺序**：预编译头文件 > 配套头文件 > 标准头文件 > 第三方库头文件 > 其他模块头文件。
- **实现代码**：普通函数 > 静态函数 > 成员函数 > 运算符重载
#### 命名空间
- 不建议使用内联命名空间。
- 使用注释为命名空间收尾。
- 禁止使用`using`引入命名空间所有符号。
- 禁止在`std`命名空间中声明任何东西。
## 类设计规范
#### 面向对象设计原则
**单一职责原则**：一个类应该仅有一个引起它变化的原因，变化的方向隐含类的职责。
**依赖倒置原则**：高层模块不应该依赖低层模块，二者都应该依赖抽象。
**开放封闭原则**：对扩展开放，对更改封闭。
**Liskov 替换原则**：子类应该可以替换父类而不改变程序的行为。
**接口隔离原则**：不应当强迫用户程序依赖它们不用的方法，接口应当小而完备。
#### 声明次序
将相似的声明进行分组：
- 类型和类型别名
- 构造函数、析构函数和赋值运算符
- 普通成员函数
- 静态方法
- 重载运算符
- 迭代器
- 数据成员
每组定义以 `public:` 开头, 其次是 `protected:`, 最后以 `private:` 结尾。
#### 运算符重载
运算符重载顺序：
- 内存管理运算符
- 其他运算符，逻辑运算符(不建议)
- 自增/自减运算符
- 算数运算符
- 位运算符
- 比较运算符
#### 语义支持
类的公有接口必须明确指明该类是可拷贝的、仅可移动的、还是既不可拷贝也不可移动的. 如果该类型的复制和移动操作有明确的语义并且有用，则应该支持这些操作.
## 注释规范
#### 使用`//`风格注释
- **语法**：以`//`开头，注释内容从`//`开始直到行尾结束。
- **适用场景**：解释局部变量、简单逻辑或临时禁用代码片段。
#### 使用`/* */`风格注释
- **语法**：以`/*`开始，以`*/`结束，注释内容可跨越多行。
- **适用场景**：用于划分代码中的不同功能区块，并对各个代码块进行详细的解释和说明。
#### 使用 XML 风格的 Doxygen 注释
- **语法**：采用`<summary>`、`<para>`、 `<typeparam>`  、`<param>`、`returns`、`exception` XML 标签。
- **适用场景**：用于类注释和函数注释。